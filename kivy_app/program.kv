WindowMenager:
    FirstWindow:
    SecondWindow:
    InfoWindow:


<MyButton@Button>:
    font_name: 'Tahoma'
    font_size: 0.5*self.height
    background_color: 0, 0, 0, 0
    size_hint: 0.1, 0.05
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        RoundedRectangle:
            size: self.size
            pos: self.pos
            radius: [10] 


<Label>:
    font_name: 'Tahoma'
    font_size: 17


<Spinner>:
    size_hint: None, None
    size: 100, 44
    background_color: 0,0,0,1


<FloatLayout>:
    canvas.before:
        Color:
            rgba: 0.188, 0.851, 0.396, 1
        Rectangle:
            pos: self.pos
            size: self.size


<FirstWindow>:
    name: "first"
    id: first_screen
    FloatLayout:
        MyButton:
            id: go_info
            text: "Instrukcja"
            pos: 0.45*root.width, 0.85*root.height
            on_release:
                app.root.current = "infopage"

        Label:
            text: "Jakaś zachęta"
            size_hint: 1 , 0.1
            pos: 0, 0.9*root.height

        Label:
            id: plik
            text:"Tu będzie wybrany plik do przemyślenia"
            size_hint: 1, 0.1
            pos: 0, 0.75*root.height

        FileChooserListView:
            id: filechooser
            path: "."
            size_hint: 1, 0.65
            on_selection: first_screen.selected(filechooser.selection)

        Label:
            id: distance
            text: 'Dystans:'
            pos_hint: {'center': (.2, .7)}
        
        Spinner:
            id: spinner_dist
            pos_hint: {'center': (.3, .7)}
            text: '<rozwiń>'
        
        Label:
            id: distance
            text: 'Czas:'
            pos_hint: {'center': (.6, .7)}

        Spinner:
            id: spinner_time
            pos_hint: {'center': (.7, .7)}
            text: '<rozwiń>'
        
        MyButton:
            text: "Dalej"
            pos: 0.45*root.width, 0.05*root.height
            on_release: 
                app.root.current = "second"
                root.manager.transition.direction = "left"


<SecondWindow>:
    name: "second"
    id: second_screen
    FloatLayout:
        Label:
            id: new_distance
            text: 'Dystans [km]'
            size_hint: 0.1, 0.05
            pos: 0.1*root.width, 0.8*root.height

        TextInput:
            text: 'Podaj dystans'
            padding_x: 0.15*self.width
            multiline: False
            input_filter: 'float'
            on_focus: self.text = '' if args[1] else self.text
            size_hint: 0.15, 0.05
            pos: 0.3*root.width, 0.8*root.height
            background_color: 0, 0, 0, 1
            foreground_color: (1, 1, 1, 1)

        Label:
            text: 'Zmiana masy'
            pos: 0.1*root.width, 0.7*root.height
            size_hint: 0.1, 0.05

        Slider:
            id: slider
            min: -5
            max: 5
            step: 0.5
            orientation: 'horizontal'
            size_hint: 0.4, 0.05
            pos: 0.5*root.width, 0.7*root.height
            cursor_image: './images/runner.png'

        Label:
            id: percent
            text: str(slider.value) + ' %'
            pos: 0.3*root.width, 0.7*root.height
            size_hint: 0.15, 0.05
            background_color: 0, 0, 0, 1
            canvas.before:
                Color:
                    rgba: self.background_color
                Rectangle:
                    pos: self.pos
                    size: self.size

        MyButton:
            id: run
            text:'Oblicz'
            pos: 0.45*root.width, 0.6*root.height

        MyButton:
            text: "Powrót"
            size_hint: 0.1, 0.05
            pos: 0.45*root.width, 0.05*root.height
            on_release: 
                app.root.current = "first"
                root.manager.transition.direction = "right"

        BoxLayout:
            orientacion: 'horizontal'
            size: (0.6*root.width, 0.1*root.height)
            size_hint: None, None
            pos: 0.2*root.width, 0.45*root.height

            Label:
                text: 'Prognozowany czas:'
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

            Label:
                id: est_time
                text: 'Tu będzie wynik'
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size

        GridLayout:
            cols: 1
            rows: 1
            size: (0.6*root.width, 0.25*root.height)
            size_hint: None, None
            pos: 0.2*root.width, 0.2*root.height
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.3
                Rectangle:
                    pos: self.pos
                    size: self.size
            Label:
                multiline: True
                text: 'Ewentualne błędy/ostrzeżenia.'         



<InfoWindow>:
    name: "infopage"
    id: infowindow
    FloatLayout:
        Label:
            id: info
            pos_hint: {'center': (.5, 0.8)}
            markup: True
            text: "[size=20][u]Instrukcja[/u][/size] \nPo wybraniu pliku csv można rozwinąć listę z nazwami kolumn i wybrać odpowiednie dla czasu i dystansu."

        MyButton:
            id: back_button
            text: "Powrót"
            pos: 0.45*root.width, 0.05*root.height
            on_release:
                app.root.current = "first"
 